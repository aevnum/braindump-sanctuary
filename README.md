# Quick Start Guide - Brain Dump Sanctuary

## 🚀 Getting Started

### 1. **Installation**
```bash
# Install dependencies
pip install -r requirements.txt

# Set up environment variables
cp .env.example .env  # Or create manually with:
# GOOGLE_API_KEY=your_key_here
# TAVILY_API_KEY=your_key_here (optional for web search)
```

### 2. **Run the App**
```bash
streamlit run app.py
```

The app will open at `http://localhost:8501`

---

## 📱 UI Guide

### Sidebar
- **Navigate**: Radio buttons to switch between Home and Feed
- **New Brain Dump**: Text area to add thoughts
- **Add to Sanctuary**: Save your thought
- **Clear**: Clear the input field
- **Refresh Clusters**: Recalculate embeddings (computationally intensive)
- **Clear All Dumps**: Delete everything and start fresh
- **Total Brain Dumps**: Counter showing all saved thoughts

### Home Tab 🏠
**What you see:**
1. **Semantic Cluster Map** (top)
   - Interactive Plotly visualization
   - Each colored cluster = group of related thoughts
   - Hover over points to see full text
   - Shows up to 20 different clusters

2. **All Brain Dumps Table** (bottom)
   - Columns: Brain Dump | Cluster Label | Created At
   - Sorted by most recent first
   - Copy-friendly plain text format

**Actions:**
- Click 🔄 **Refresh** to recalculate clusters (takes 10-30 seconds)
- Watch the spinners while embeddings and labels generate

### Feed Tab 📰
**What you see:**
1. **Blog-Style Cards** for 5 most recent brain dumps
2. **Each Card Contains:**
   - 💭 Title (your brain dump text)
   - 🏷️ Cluster badge (what category it belongs to)
   - **Summary** (auto-generated by SearchAgent)
     - If Tavily API key set: Real web search + AI synthesis
     - If no key: Mock data for demo purposes
   - **Questions for Reflection** (generated by QuestionAgent)
     - Socratic questions to help you think deeper

**Why use Feed?**
- Get insights without clicking through filters
- Discover patterns via agent-generated summaries
- Reflect on guided questions
- Perfect for morning review

---

## 🧠 Workflow Examples

### Example 1: Capture and Cluster
```
1. Sidebar: Type "Why do dreams fade so quickly?"
2. Click "Add to Sanctuary"
3. Add 10+ more diverse thoughts
4. Switch to Home tab
5. See clusters form automatically
6. Cluster labels appear (e.g., "Consciousness & Mind")
```

### Example 2: Deep Dive on Feed
```
1. Switch to Feed tab
2. Read auto-generated summaries
3. See Socratic questions at bottom of each card
4. Reflect on the questions
5. Use insights for next brainstorm session
```

### Example 3: Track Over Time
```
1. Add thoughts daily via sidebar
2. Check Home tab to see cluster evolution
3. Use Feed tab for morning reflection
4. Spot patterns in your thinking
```

---

## ⚙️ Configuration

### Environment Variables (.env)
```ini
# Required
GOOGLE_API_KEY=sk-proj-xxxxxxxxxxxxxxx

# Optional (for web search features)
TAVILY_API_KEY=tvly-xxxxxxxxxxxxxxx
```

### Streamlit Settings (optional)
Create `.streamlit/config.toml`:
```toml
[theme]
primaryColor = "#4ECDC4"
backgroundColor = "#0d1117"
secondaryBackgroundColor = "#161b22"
textColor = "#c9d1d9"

[client]
showErrorDetails = true
```

---

## 🔧 Common Tasks

### Delete a Single Dump
*Currently not supported via UI. To do:*
1. Open `braindump.db` with SQLite browser
2. Delete row from `dumps` table
3. Refresh in app

### Re-calculate Clusters
1. Go to Home tab
2. Click 🔄 **Refresh** button
3. Wait for spinner to complete

### Export All Dumps
*Currently not supported via UI. To do:*
```bash
sqlite3 braindump.db "SELECT id, text, created_at FROM dumps" > exports.csv
```

### Clear Everything and Start Fresh
1. Click 🗑️ **Clear All Dumps** in sidebar
2. Confirm action
3. Add new thoughts

---

## 📊 Performance Tips

### Clustering
- **Fast**: 3-20 dumps (< 5 seconds)
- **Moderate**: 20-100 dumps (5-30 seconds)
- **Slow**: 100+ dumps (> 30 seconds)
- Use caching to avoid recomputing

### API Usage
- **Google Gemini**: Free tier allows ~60 requests/min
- **Tavily Search**: Free tier allows ~100 searches/month
- Set environment variables to enable features

---

## 🐛 Troubleshooting

### "API Key not found" error
→ Make sure `.env` file exists with `GOOGLE_API_KEY`
→ Restart streamlit: `streamlit run app.py`

### Clustering takes forever
→ You might have 100+ dumps
→ Only happens on first run or "Refresh"
→ Results are cached, so it's faster next time

### Feed cards showing mock data
→ Your `TAVILY_API_KEY` isn't set
→ Add it to `.env` and restart

### Database locked error
→ Close other connections to `braindump.db`
→ Try deleting `braindump.db` and starting fresh

### "ModuleNotFoundError" for imports
→ Missing dependencies: `pip install -r requirements.txt`
→ Wrong Python version? Try `python3 -m pip install ...`

---

## 📚 Architecture Overview

```
braindump_core.py
├── BrainDumpDB (SQLite storage)
├── EmbeddingEngine (sentence-transformers)
├── ClusterEngine (HDBSCAN + UMAP)
└── Visualization (Plotly)

agents.py
├── QuestionAgent (Socratic questions)
└── SearchAgent (Web search + synthesis)

app.py
├── Sidebar (Input + Navigation)
├── Home Tab (Clusters + Table)
├── Feed Tab (Blog-style cards)
└── Helper Functions (Rendering)
```

---

## 🎯 Next Steps

1. **Add your first thought** via sidebar
2. **Switch between Home and Feed** to see different views
3. **Check back daily** to build your idea garden
4. **Export insights** when you find patterns

---

## 💡 Tips

- **Best for**: Capturing fleeting thoughts, finding patterns, exploring ideas
- **Start small**: 5-10 thoughts to see clustering in action
- **Use specificity**: "Why do dreams fade?" works better than "dreams"
- **Review regularly**: Feed tab is great for morning/evening review
- **Share clusters**: Screenshot Home tab to share your thinking

---

## 📝 Notes

- All data stored locally in `braindump.db` (no cloud sync)
- Embeddings cached in database (fast retrieval)
- Cluster labels generated once and reused
- Each brain dump timestamped automatically

---

**Ready to catch your thoughts before they slip away!** 🧠✨

For issues or questions, check REFACTOR_SUMMARY.md or ARCHITECTURE.md
