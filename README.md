# Quick Start Guide - Brain Dump Sanctuary

## ğŸš€ Getting Started

### 1. **Neo4j Setup** (Required)

This app uses **Neo4j Aura** (graph database) as the backend. You need to create a free instance:

1. **Create Neo4j Aura Instance:**
   - Go to https://console.neo4j.io/
   - Sign up for a free account (if you don't have one)
   - Create a new "free" Aura instance
   - Copy your connection details:
     - Connection URI (e.g., `neo4j+ssc://xxxxx.databases.neo4j.io`)
     - Username (default: `neo4j`)
     - Password (set during creation)

### 2. **Installation**
```bash
# Install dependencies
pip install -r requirements.txt

# Set up environment variables
cp .env.example .env

# Edit .env with your credentials:
# NEO4J_URI=neo4j+ssc://your-instance-id.databases.neo4j.io
# NEO4J_USER=neo4j
# NEO4J_PASSWORD=your-password-here
# GOOGLE_API_KEY=your_google_api_key_here
# TAVILY_API_KEY=your_tavily_api_key_here (optional)
```

**Where to get API keys:**
- ğŸ”‘ **Google Gemini API**: https://aistudio.google.com/app/apikey (free)
- ğŸ” **Tavily Search API**: https://app.tavily.com (optional, for web search)

### 3. **Run the App**
```bash
streamlit run app.py
```

The app will open at `http://localhost:8501`

---

## ğŸ“± UI Guide

### Sidebar
- **Navigate**: Radio buttons to switch between Home and Feed
- **New Brain Dump**: Text area to add thoughts
- **Add to Sanctuary**: Save your thought (stored in Neo4j)
- **Clear**: Clear the input field
- **Refresh Clusters**: Recalculate embeddings (computationally intensive)
- **Clear All Dumps**: Delete everything from Neo4j and start fresh
- **Total Brain Dumps**: Counter showing all saved thoughts

### Home Tab ğŸ 
**What you see:**
1. **Semantic Cluster Map** (top)
   - Interactive knowledge graph visualization
   - Each colored cluster = group of related thoughts
   - Nodes connected by semantic similarity
   - Hover over points to see full text

2. **All Brain Dumps Table** (bottom)
   - Columns: Brain Dump | Cluster Label | Created At
   - Sorted by most recent first
   - Copy-friendly plain text format

**Actions:**
- Click ğŸ”„ **Refresh** to recalculate clusters (takes 10-30 seconds)
- Watch the spinners while embeddings and labels generate

### Feed Tab ğŸ“°
**What you see:**
1. **Blog-Style Cards** for 5 most recent brain dumps
2. **Each Card Contains:**
   - ğŸ’­ Title (your brain dump text)
   - ğŸ·ï¸ Cluster badge (what category it belongs to)
   - **Summary** (auto-generated by SearchAgent)
     - If Tavily API key set: Real web search + AI synthesis
     - If no key: Mock data for demo purposes
   - **Questions for Reflection** (generated by QuestionAgent)
     - Socratic questions to help you think deeper

**Why use Feed?**
- Get insights without clicking through filters
- Discover patterns via agent-generated summaries
- Reflect on guided questions
- Perfect for morning review

---

## ğŸ§  Workflow Examples

### Example 1: Capture and Cluster
```
1. Sidebar: Type "Why do dreams fade so quickly?"
2. Click "Add to Sanctuary"
3. Add 10+ more diverse thoughts
4. Switch to Home tab
5. See clusters form automatically
6. Cluster labels appear (e.g., "Consciousness & Mind")
```

### Example 2: Deep Dive on Feed
```
1. Switch to Feed tab
2. Read auto-generated summaries
3. See Socratic questions at bottom of each card
4. Reflect on the questions
5. Use insights for next brainstorm session
```

### Example 3: Track Over Time
```
1. Add thoughts daily via sidebar
2. Check Home tab to see cluster evolution
3. Use Feed tab for morning reflection
4. Spot patterns in your thinking
```

---

## âš™ï¸ Configuration

### Environment Variables (.env)
```ini
# Neo4j Aura (Required)
NEO4J_URI=neo4j+ssc://your-instance-id.databases.neo4j.io
NEO4J_USER=neo4j
NEO4J_PASSWORD=your-password-here

# Google Gemini API (Required)
GOOGLE_API_KEY=sk-proj-xxxxxxxxxxxxxxx

# Optional (for web search features)
TAVILY_API_KEY=tvly-xxxxxxxxxxxxxxx
```

### Streamlit Settings (optional)
Create `.streamlit/config.toml`:
```toml
[theme]
primaryColor = "#4ECDC4"
backgroundColor = "#0d1117"
secondaryBackgroundColor = "#161b22"
textColor = "#c9d1d9"

[client]
showErrorDetails = true
```

---

## ğŸ”§ Database Management

### Re-calculate Clusters
1. Go to Home tab
2. Click ğŸ”„ **Refresh** button
3. Wait for spinner to complete

### Clear Everything and Start Fresh
1. Click ğŸ—‘ï¸ **Clear All Dumps** in sidebar
2. Confirm action
3. Add new thoughts

### Neo4j Maintenance
Use the `neo4j_maintenance.py` script:
```bash
# Show database statistics
python neo4j_maintenance.py stats

# Remove duplicate brain dumps
python neo4j_maintenance.py dedup

# Clear all data (WARNING: Irreversible)
python neo4j_maintenance.py clear
```

---

## ğŸ“Š Performance Tips

### Clustering
- **Fast**: 3-20 dumps (< 5 seconds)
- **Moderate**: 20-100 dumps (5-30 seconds)
- **Slow**: 100+ dumps (> 30 seconds)
- Use caching to avoid recomputing

### API Usage
- **Google Gemini**: Free tier allows ~60 requests/min
- **Tavily Search**: Free tier allows ~100 searches/month
- Set environment variables to enable features

### Neo4j Query Performance
- Dump and cluster lookups are indexed for fast retrieval
- Embedding vectors cached in graph nodes
- Knowledge graph relationships enable fast similarity searches

---

## ğŸ› Troubleshooting

### Neo4j Connection Error
â†’ Verify your Aura instance is running: https://console.neo4j.io/
â†’ Check `NEO4J_URI`, `NEO4J_USER`, `NEO4J_PASSWORD` in `.env`
â†’ Ensure your IP is allowlisted in Aura instance settings

### "API Key not found" error
â†’ Make sure `.env` file exists with `GOOGLE_API_KEY`
â†’ Restart streamlit: `streamlit run app.py`

### Clustering takes forever
â†’ You might have 100+ dumps
â†’ Only happens on first run or "Refresh"
â†’ Consider batching cluster operations for large datasets

### Feed cards showing mock data
â†’ Your `TAVILY_API_KEY` isn't set
â†’ Add it to `.env` and restart

### "ModuleNotFoundError" for imports
â†’ Missing dependencies: `pip install -r requirements.txt`
â†’ Wrong Python version? Try `python3 -m pip install ...`

---

## ğŸ“š Architecture Overview

```
braindump_core.py
â”œâ”€â”€ BrainDumpDB (Neo4j Graph Database)
â”œâ”€â”€ EmbeddingEngine (sentence-transformers)
â”œâ”€â”€ ClusterEngine (HDBSCAN + UMAP)
â””â”€â”€ Visualization (Plotly)

agents.py
â”œâ”€â”€ QuestionAgent (Socratic questions)
â””â”€â”€ SearchAgent (Web search + synthesis)

app.py
â”œâ”€â”€ Sidebar (Input + Navigation)
â”œâ”€â”€ Home Tab (Knowledge Graph + Table)
â”œâ”€â”€ Feed Tab (Blog-style cards)
â””â”€â”€ Helper Functions (Rendering)

neo4j_maintenance.py
â”œâ”€â”€ Database statistics
â”œâ”€â”€ Deduplication
â””â”€â”€ Data cleanup
```

---

## ğŸ¯ Next Steps

1. **Set up Neo4j Aura** instance at https://console.neo4j.io/
2. **Add your first thought** via sidebar
3. **Switch between Home and Feed** to see different views
4. **Check back daily** to build your idea garden
5. **Monitor performance** using `neo4j_maintenance.py stats`

---

## ğŸ’¡ Tips

- **Best for**: Capturing fleeting thoughts, finding patterns, exploring ideas
- **Start small**: 5-10 thoughts to see clustering in action
- **Use specificity**: "Why do dreams fade?" works better than "dreams"
- **Review regularly**: Feed tab is great for morning/evening review
- **Share clusters**: Screenshot Home tab to share your thinking

---

## ğŸ“ Notes

- All data stored locally in `braindump.db` (no cloud sync)
- Embeddings cached in database (fast retrieval)
- Cluster labels generated once and reused
- Each brain dump timestamped automatically

---

**Ready to catch your thoughts before they slip away!** ğŸ§ âœ¨

For issues or questions, check REFACTOR_SUMMARY.md or ARCHITECTURE.md
